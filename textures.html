<!-- loading three.js -->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Three.js - Fundamentals with light</title>
  </head>
  <!-- loading canvas tag -->
  <body>
    <canvas id="c" width="400" height="200"></canvas>
  </body>
  <script type="importmap">
    {
      "imports": {
        "three": "../../build/three.module.js"
        
      }
    }
  </script>
  <script type="module">
    import * as THREE from 'three';
    
    // drawing into the canvas
    function main(){
        const canvas=document.querySelector('#c');
        // assign canvas and then create a WebGLRenderer
        const renderer= new THREE.WebGLRenderer({antialias:true, canvas})

        // create a PerspectiveCamera
        const fov = 75; // field of view (75 degrees in the vertical dimension)
        const aspect = 2;  // the canvas default --- display aspect (in this case 300/150 or 2)
        const near = 0.1; // frustrum starts .1 from front 
        const far = 5; // ends 5 units from the front
        const camera = new THREE.PerspectiveCamera(fov, aspect, near, far); // define the shape frustrum

        // moving the camera slighly back
        camera.position.z=2;

        //making a scene
        //roof of a form of scene graph
        const scene=new THREE.Scene();
        {
        const color = 0xFFFFFF;
        const intensity = 3;
        const light = new THREE.DirectionalLight(color, intensity);
        light.position.set(-1, 2, 4);
        scene.add(light);
        }
        
        //BoxGeometry contians the data for a box
        const boxWidth=1;
        const boxHeight=1;
        const boxDepth=1;
        const geometry = new THREE.BoxGeometry(boxWidth,boxHeight,boxDepth);
        
       //create a material and color
        //const material = new THREE.MeshBasicMaterial({color: 0x44aa88});
        //const material = new THREE.MeshPhongMaterial({color: 0x44aa88});  // greenish blue

        //adding texture:
        const loader = new THREE.TextureLoader();
        const texture = loader.load( 'bonsaipic1.jpg' );
        texture.colorSpace = THREE.SRGBColorSpace;

        const material = new THREE.MeshBasicMaterial({map: texture});
        //create a mesh which is a shape of object, material, and position 
        const cube = new THREE.Mesh(geometry, material);
        
        //adding cube mesh to scene
        scene.add(cube);

        
        //render the scene by calling render function and passing our scene and camera
        //renderer.render(scene,camera);

        //rendering it spinning
        function render(time) {
        time *= 0.001;  // convert time to seconds
        
        cube.rotation.x = time;
        cube.rotation.y = time;
        
        renderer.render(scene, camera);
        
        requestAnimationFrame(render);
        }
        //request browser to animate something more dynamically
        requestAnimationFrame(render);

    }
    main();
  </script>
</html>
